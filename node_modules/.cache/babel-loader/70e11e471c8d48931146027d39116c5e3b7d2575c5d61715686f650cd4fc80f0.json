{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\IdeaProjects\\\\adp31\\\\frontend\\\\src\\\\context\\\\CartContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext();\nexport const useCart = () => {\n  _s();\n  const context = useContext(CartContext);\n  if (!context) {\n    throw new Error('useCart must be used within a CartProvider');\n  }\n  return context;\n};\n_s(useCart, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const CartProvider = ({\n  children\n}) => {\n  _s2();\n  const [cartItems, setCartItems] = useState([]);\n  useEffect(() => {\n    // Load cart from localStorage\n    const storedCart = localStorage.getItem('snuggleReadCart');\n    if (storedCart) {\n      try {\n        setCartItems(JSON.parse(storedCart));\n      } catch (error) {\n        console.error('Error parsing stored cart:', error);\n        localStorage.removeItem('snuggleReadCart');\n      }\n    }\n  }, []);\n  useEffect(() => {\n    // Save cart to localStorage whenever it changes\n    localStorage.setItem('snuggleReadCart', JSON.stringify(cartItems));\n  }, [cartItems]);\n  const addToCart = (book, quantity = 1) => {\n    setCartItems(prevItems => {\n      const existingItem = prevItems.find(item => item.bookId === book.bookId);\n      if (existingItem) {\n        return prevItems.map(item => item.bookId === book.bookId ? {\n          ...item,\n          quantity: item.quantity + quantity\n        } : item);\n      } else {\n        return [...prevItems, {\n          ...book,\n          quantity\n        }];\n      }\n    });\n  };\n  const removeFromCart = bookId => {\n    setCartItems(prevItems => prevItems.filter(item => item.bookId !== bookId));\n  };\n  const updateQuantity = (bookId, quantity) => {\n    if (quantity <= 0) {\n      removeFromCart(bookId);\n    } else {\n      setCartItems(prevItems => prevItems.map(item => item.bookId === bookId ? {\n        ...item,\n        quantity\n      } : item));\n    }\n  };\n  const clearCart = () => {\n    setCartItems([]);\n  };\n  const getCartTotal = () => {\n    return cartItems.reduce((total, item) => total + item.price * item.quantity, 0);\n  };\n  const getCartSubtotal = () => {\n    return cartItems.reduce((total, item) => total + item.price * item.quantity, 0);\n  };\n  const getStudentDiscount = () => {\n    return cartItems.reduce((total, item) => total + item.price * 0.05 * item.quantity, 0);\n  };\n  const getDiscountedTotal = (userType = 'customer') => {\n    const subtotal = getCartSubtotal();\n    const discount = userType === 'customer' ? getStudentDiscount() : 0;\n    return subtotal - discount;\n  };\n  const getShippingCost = (userType = 'customer') => {\n    const discountedTotal = getDiscountedTotal(userType);\n    return discountedTotal >= 500 ? 0 : 50;\n  };\n  const getFinalTotal = (userType = 'customer') => {\n    return getDiscountedTotal(userType) + getShippingCost(userType);\n  };\n  const getCartItemCount = () => {\n    return cartItems.reduce((total, item) => total + item.quantity, 0);\n  };\n  const getTotalQuantity = () => {\n    return cartItems.reduce((total, item) => total + item.quantity, 0);\n  };\n  const value = {\n    cartItems,\n    addToCart,\n    removeFromCart,\n    updateQuantity,\n    clearCart,\n    getCartTotal,\n    getCartSubtotal,\n    getStudentDiscount,\n    getDiscountedTotal,\n    getShippingCost,\n    getFinalTotal,\n    getCartItemCount,\n    getTotalQuantity\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 5\n  }, this);\n};\n_s2(CartProvider, \"jdONvkEabzLc64SbXgqXBHRMg9M=\");\n_c = CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","jsxDEV","_jsxDEV","CartContext","useCart","_s","context","Error","CartProvider","children","_s2","cartItems","setCartItems","storedCart","localStorage","getItem","JSON","parse","error","console","removeItem","setItem","stringify","addToCart","book","quantity","prevItems","existingItem","find","item","bookId","map","removeFromCart","filter","updateQuantity","clearCart","getCartTotal","reduce","total","price","getCartSubtotal","getStudentDiscount","getDiscountedTotal","userType","subtotal","discount","getShippingCost","discountedTotal","getFinalTotal","getCartItemCount","getTotalQuantity","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/User/IdeaProjects/adp31/frontend/src/context/CartContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\n\r\nconst CartContext = createContext();\r\n\r\nexport const useCart = () => {\r\n  const context = useContext(CartContext);\r\n  if (!context) {\r\n    throw new Error('useCart must be used within a CartProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const CartProvider = ({ children }) => {\r\n  const [cartItems, setCartItems] = useState([]);\r\n\r\n  useEffect(() => {\r\n    // Load cart from localStorage\r\n    const storedCart = localStorage.getItem('snuggleReadCart');\r\n    if (storedCart) {\r\n      try {\r\n        setCartItems(JSON.parse(storedCart));\r\n      } catch (error) {\r\n        console.error('Error parsing stored cart:', error);\r\n        localStorage.removeItem('snuggleReadCart');\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // Save cart to localStorage whenever it changes\r\n    localStorage.setItem('snuggleReadCart', JSON.stringify(cartItems));\r\n  }, [cartItems]);\r\n\r\n  const addToCart = (book, quantity = 1) => {\r\n    setCartItems(prevItems => {\r\n      const existingItem = prevItems.find(item => item.bookId === book.bookId);\r\n      \r\n      if (existingItem) {\r\n        return prevItems.map(item =>\r\n          item.bookId === book.bookId\r\n            ? { ...item, quantity: item.quantity + quantity }\r\n            : item\r\n        );\r\n      } else {\r\n        return [...prevItems, { ...book, quantity }];\r\n      }\r\n    });\r\n  };\r\n\r\n  const removeFromCart = (bookId) => {\r\n    setCartItems(prevItems => prevItems.filter(item => item.bookId !== bookId));\r\n  };\r\n\r\n  const updateQuantity = (bookId, quantity) => {\r\n    if (quantity <= 0) {\r\n      removeFromCart(bookId);\r\n    } else {\r\n      setCartItems(prevItems =>\r\n        prevItems.map(item =>\r\n          item.bookId === bookId ? { ...item, quantity } : item\r\n        )\r\n      );\r\n    }\r\n  };\r\n\r\n  const clearCart = () => {\r\n    setCartItems([]);\r\n  };\r\n\r\n  const getCartTotal = () => {\r\n    return cartItems.reduce((total, item) => total + (item.price * item.quantity), 0);\r\n  };\r\n\r\n  const getCartSubtotal = () => {\r\n    return cartItems.reduce((total, item) => total + (item.price * item.quantity), 0);\r\n  };\r\n\r\n  const getStudentDiscount = () => {\r\n    return cartItems.reduce((total, item) => total + (item.price * 0.05 * item.quantity), 0);\r\n  };\r\n\r\n  const getDiscountedTotal = (userType = 'customer') => {\r\n    const subtotal = getCartSubtotal();\r\n    const discount = userType === 'customer' ? getStudentDiscount() : 0;\r\n    return subtotal - discount;\r\n  };\r\n\r\n  const getShippingCost = (userType = 'customer') => {\r\n    const discountedTotal = getDiscountedTotal(userType);\r\n    return discountedTotal >= 500 ? 0 : 50;\r\n  };\r\n\r\n  const getFinalTotal = (userType = 'customer') => {\r\n    return getDiscountedTotal(userType) + getShippingCost(userType);\r\n  };\r\n\r\n  const getCartItemCount = () => {\r\n    return cartItems.reduce((total, item) => total + item.quantity, 0);\r\n  };\r\n\r\n  const getTotalQuantity = () => {\r\n    return cartItems.reduce((total, item) => total + item.quantity, 0);\r\n  };\r\n\r\n  const value = {\r\n    cartItems,\r\n    addToCart,\r\n    removeFromCart,\r\n    updateQuantity,\r\n    clearCart,\r\n    getCartTotal,\r\n    getCartSubtotal,\r\n    getStudentDiscount,\r\n    getDiscountedTotal,\r\n    getShippingCost,\r\n    getFinalTotal,\r\n    getCartItemCount,\r\n    getTotalQuantity\r\n  };\r\n\r\n  return (\r\n    <CartContext.Provider value={value}>\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}